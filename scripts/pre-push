#!/bin/bash
# Pre-push hook for amc-peripheral
# Install: ln -sf ../../scripts/pre-push .git/hooks/pre-push

set -e

echo "ğŸ” Running pre-push checks..."
echo ""

echo "ğŸ“‹ Linting with ruff..."
uv run ruff check .
echo "âœ“ Linting passed"
echo ""

echo "ğŸ“ Checking formatting..."
uv run ruff format --check .
echo "âœ“ Formatting check passed"
echo ""

echo "ğŸ” Type checking with pyrefly..."
uv run pyrefly check .
echo "âœ“ Type checking passed"
echo ""

echo "ğŸ§ª Running tests..."
uv run pytest -q
echo ""

echo "âœ… All pre-push checks passed!"
